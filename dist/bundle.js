(()=>{"use strict";var n={d:(t,s)=>{for(var e in s)n.o(s,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})},o:(n,t)=>Object.prototype.hasOwnProperty.call(n,t)};n.d({},{H6:()=>p});const t="difficulty",s="game",e="result";function a(n){for(let t=n.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[n[t],n[s]]=[n[s],n[t]]}return n}let i=null,l=0;function c(){clearInterval(i)}function o({appEl:n,goToPage:s,playCards:a}){const o=`<div class="game">\n    <div class="game__info">\n      <div class="timer">\n        <div class="timer__block">\n          <span class="timer__label">min</span>\n          <span id="minutes">00</span>\n        </div>\n        <span class="timer__dot">.</span>\n        <div class="timer__block">\n          <span class="timer__label">sek</span>\n          <span id="seconds">00</span>\n        </div>\n      </div>\n      <button class="game__btn btn">Начать заново</button>\n    </div>\n    <div class="cards">${a.map(((n,t)=>`<div class="card visible" data-index="${t}">\n                            <div class="card__back">\n                                <img src="./static/img/card-back.png" alt="card back">\n                            </div>\n                            <div class="card__front">\n                                <div class="card__top-left">\n                                    <span class="rank">${n.rank}</span>\n                                    <span class="small-suit">${r(n.suit)}</span>\n                                </div>\n                                <div class="card__center-suit">${r(n.suit)}\n                                </div>\n                                <div class="card__down-right">\n                                    <span class="rank">${n.rank}</span>\n                                    <span class="small-suit">${r(n.suit)}</span>\n                                </div> \n                            </div>  \n                        </div>`)).join("")}</div>\n  `;n.innerHTML=o;const d=n.querySelectorAll(".card");let m=[],u=0;d.forEach((n=>{n.classList.remove("visible")}));let v=!1;setTimeout((()=>{d.forEach((n=>{n.classList.add("visible")}))}),500);let f=setTimeout((()=>{d.forEach((n=>{n.classList.remove("visible")})),v=!0,function(){let n=0,t=0;const s=document.getElementById("minutes"),e=document.getElementById("seconds");i=setInterval((()=>{t++,60===t&&(t=0,n++),l=60*n+t,s.textContent=n<10?`0${n}`:n,e.textContent=t<10?`0${t}`:t}),1e3)}()}),5e3);d.forEach(((n,t)=>{n.addEventListener("click",(()=>{if(m.length<2&&!n.classList.contains("matched")&&!n.classList.contains("visible")&&(n.classList.add("visible"),m.push({element:n,index:t}),2===m.length)){const n=a[m[0].index],t=a[m[1].index];n.rank===t.rank&&n.suit===t.suit?(m.forEach((n=>{setTimeout((()=>{n.element.classList.add("matched")}),600)})),u++,u===a.length/2&&setTimeout((()=>{c(),p.gameTime=l,p.gameStatus=e,p.isWin=!0,s(e)}),800)):setTimeout((()=>{c(),console.log(l),p.gameTime=l,p.gameStatus=e,p.isWin=!1,s(e)}),800),m=[]}}))})),document.querySelector(".game__btn").addEventListener("click",(()=>{v||clearTimeout(f),c(),s(t)}))}function r(n){return{Hearts:'<img src="./static/img/hearts.svg" alt="hearts">',Diamonds:'<img src="./static/img/diamonds.svg" alt="diamonds">',Clubs:'<img src="./static/img/clubs.svg" alt="clubs">',Spades:'<img src="./static/img/spades.svg" alt="spades">'}[n]}function d({appEl:n,goToPage:s}){let e=Math.floor(p.gameTime/60),a=p.gameTime%60;const i=`<div class="main">\n    <div class = "box result-box scale-in-center">\n    <img\n    src="./static/img/${p.isWin?"win-img.png":"loose-img.png"}"\n    alt="colorfull cone"\n    class="win__img"/>\n                        <p class="box__title result-box__title">${p.isWin?"Вы выиграли!":"Вы проиграли!"}</p>\n                       \n                        <p class = "timer__title">Затраченное время</p>\n                           \n                            <div class="timer result-timer">\n                            <div class="timer__block">\n                             \n                              <span id="minutes">${e<10?"0"+e:e}</span>\n                            </div>\n                            <span class="timer__dot">.</span>\n                            <div class="timer__block">\n                             \n                              <span id="seconds">${a<10?"0"+a:a}</span>\n                            </div>\n                          </div>\n                          <button type="submit" class="btn result-btn" id="start-btn">Играть снова</button>\n                        </div>\n                    </div>\n                   \n\n                </div>`;n.innerHTML=i,document.getElementById("start-btn").addEventListener("click",(()=>{s(t)}))}let m=null;const u=document.getElementById("app"),p={gameTime:0,difficulty:null,gameStatus:m,cards:[],selectedCards:[],isWin:null},v=n=>{if([t,s,e].includes(n)){if(n===t)return m=t,f();if(n===s){const n=p.cards;return o({appEl:u,goToPage:v,playCards:n})}if(n===e)return d({appEl:u,goToPage:v})}throw new Error("Страница не существует")},f=()=>{if(m===t)return function({appEl:n,goToPage:t}){n.innerHTML='<div class="main">\n    <form class="difficulty-form">\n                    <div class="box">\n                        <p class="box__title">Выбери сложность</p>\n                        <div class="box__container">\n                            <label class="box__item">\n                                <input type="radio" name="difficulty" value="1" />\n                                <span class="box__item-text">1</span>\n                            </label>\n                            <label class="box__item">\n                                <input type="radio" name="difficulty" value="2" />\n                                <span class="box__item-text">2</span>\n                            </label>\n                            <label class="box__item">\n                                <input type="radio" name="difficulty" value="3" />\n                                <span class="box__item-text">3</span>\n                            </label>\n                        </div>\n                        <button type="submit" class="btn difficulty-btn" id="start-btn">Старт</button>\n                        <div class="form-error"></div>\n                    </div>\n                </form>\n                </div>';const e=n.querySelector(".difficulty-form"),i=n.querySelector(".form-error"),l=document.querySelectorAll(".box__item");let c=null;function o(n){i.textContent=n}l.forEach((n=>{n.addEventListener("click",(()=>{o(""),null!==c&&c.classList.remove("selected"),n.classList.add("selected"),c=n}))})),e.addEventListener("submit",(n=>{n.preventDefault();const i=e.querySelector("input[name='difficulty']:checked");if(!i)return void o("Выберите уровень сложности!");const l=parseInt(i.value);p.difficulty=l,p.gameStatus=s,p.cards=function(n){let t=[];const s=["Diamonds","Hearts","Clubs","Spades"],e=["A","K","Q","J","10","9","8","7","6"];for(let n of a(s))for(let s of a(e))t.push({suit:n,rank:s});return t=a(t).slice(0,3*n).flatMap((n=>[n,{...n}])),a(t)}(l),t(s)}))}({appEl:u,goToPage:v});if(m===s){const n=p.cards;return o({appEl:u,goToPage:v,playCards:n})}return m===e?d({appEl:u,goToPage:v}):void 0};v(t)})();