(()=>{"use strict";var s={d:(n,t)=>{for(var a in t)s.o(t,a)&&!s.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:t[a]})},o:(s,n)=>Object.prototype.hasOwnProperty.call(s,n)};s.d({},{H:()=>c});const n="difficulty",t="game",a="result";function e(s){for(let n=s.length-1;n>0;n--){const t=Math.floor(Math.random()*(n+1));[s[n],s[t]]=[s[t],s[n]]}return s}function i(s){return{Hearts:'<img src="./static/img/hearts.svg" alt="hearts">',Diamonds:'<img src="./static/img/diamonds.svg" alt="diamonds">',Clubs:'<img src="./static/img/clubs.svg" alt="clubs">',Spades:'<img src="./static/img/spades.svg" alt="spades">'}[s]}let l=null;const c={gameTime:0,difficulty:null,gameStatus:l,cards:[],selectedCards:[],isWin:null},o=s=>{if([n,t,a].includes(s))return s===n?(l=n,r()):(s===t&&r(),s===a&&r(),l=s,void r());throw new Error("страницы не существует")},r=()=>{const s=document.getElementById("app");if(l===n)return function({appEl:s,goToPage:n}){s.innerHTML='<div class="main">\n    <form class="difficulty-form">\n                    <div class="box">\n                        <p class="box__title">Выбери сложность</p>\n                        <div class="box__container">\n                            <label class="box__item">\n                                <input type="radio" name="difficulty" value="1" />\n                                <span class="box__item-text">1</span>\n                            </label>\n                            <label class="box__item">\n                                <input type="radio" name="difficulty" value="2" />\n                                <span class="box__item-text">2</span>\n                            </label>\n                            <label class="box__item">\n                                <input type="radio" name="difficulty" value="3" />\n                                <span class="box__item-text">3</span>\n                            </label>\n                        </div>\n                        <button type="submit" class="btn difficulty-btn" id="start-btn">Старт</button>\n                        <div class="form-error"></div>\n                    </div>\n                </form>\n                </div>';const a=s.querySelector(".difficulty-form"),i=s.querySelector(".form-error"),l=document.querySelectorAll(".box__item");let o=null;function r(s){i.textContent=s}l.forEach((s=>{s.addEventListener("click",(()=>{r(""),null!==o&&o.classList.remove("selected"),s.classList.add("selected"),o=s}))})),a.addEventListener("submit",(s=>{s.preventDefault();const i=a.querySelector("input[name='difficulty']:checked");if(!i)return void r("Выберите уровень сложности!");const l=parseInt(i.value);c.difficulty=l,c.gameStatus=t,c.cards=function(s){let n=[];const t=["Diamonds","Hearts","Clubs","Spades"],a=["A","K","Q","J","10","9","8","7","6"];for(let s of e(t))for(let t of e(a))n.push({suit:s,rank:t});return n=e(n).slice(0,3*s).flatMap((s=>[s,{...s}])),e(n)}(l),n(t)}))}({appEl:s,goToPage:o});if(l===t){const t=c.cards;return function({appEl:s,goToPage:t,playCards:e}){const l=`<div class="game">\n    <div class="game__info">\n      <div class="timer">\n        <div class="timer__block">\n          <span class="timer__label">min</span>\n          <span id="minutes">00</span>\n        </div>\n        <span class="timer__dot">.</span>\n        <div class="timer__block">\n          <span class="timer__label">sek</span>\n          <span id="seconds">00</span>\n        </div>\n      </div>\n      <button class="game__btn btn">Начать заново</button>\n    </div>\n    <div class="cards">${e.map(((s,n)=>(console.log(s),`<div class="card visible" data-index="${n}">\n                            <div class="card__back">\n                                <img src="./static/img/card-back.png" alt="card back">\n                            </div>\n                            <div class="card__front">\n                                <div class="card__top-left">\n                                    <span class="rank">${s.rank}</span>\n                                    <span class="small-suit">${i(s.suit)}</span>\n                                </div>\n                                <div class="card__center-suit">${i(s.suit)}\n                                </div>\n                                <div class="card__down-right">\n                                    <span class="rank">${s.rank}</span>\n                                    <span class="small-suit">${i(s.suit)}</span>\n                                </div> \n                            </div>  \n                        </div>`))).join("")}</div>\n  `;s.innerHTML=l;const o=s.querySelectorAll(".card");let r=[],d=0;o.forEach((s=>{s.classList.remove("visible")})),setTimeout((()=>{o.forEach((s=>{s.classList.add("visible")}))}),500),setTimeout((()=>{o.forEach((s=>{s.classList.remove("visible")}))}),5e3),o.forEach(((s,n)=>{s.addEventListener("click",(()=>{if(r.length<2&&!s.classList.contains("matched")&&!s.classList.contains("visible")&&(s.classList.add("visible"),r.push({element:s,index:n}),2===r.length)){const s=e[r[0].index],n=e[r[1].index];s.rank===n.rank&&s.suit===n.suit?(r.forEach((s=>{setTimeout((()=>{s.element.classList.add("matched")}),600)})),d++,d===e.length/2&&setTimeout((()=>{c.gameStatus=a,c.isWin=!0,t(a)}),800)):setTimeout((()=>{c.gameStatus=a,c.isWin=!1,t(a)}),800),r=[]}}))})),document.querySelector(".game__btn").addEventListener("click",(()=>{console.log("start"),t(n)}))}({appEl:s,goToPage:o,playCards:t})}return l===a?function({appEl:s,goToPage:t}){console.log(c);const a=`<div class="main">\n    <div class = "box">\n    <img\n    src="./static/img/win-img.png"\n    alt="colorfull cone"\n    class="win__img"/>\n                        <p class="box__title result-box__title">${c.isWin?"Вы выиграли!":"Вы проиграли!"}</p>\n                       \n                        <p class = "timer__title">Затраченное время</p>\n                           \n                            <div class="timer result-timer">\n                            <div class="timer__block">\n                             \n                              <span id="minutes">00</span>\n                            </div>\n                            <span class="timer__dot">.</span>\n                            <div class="timer__block">\n                             \n                              <span id="seconds">00</span>\n                            </div>\n                          </div>\n                          <button type="submit" class="btn result-btn" id="start-btn">Старт</button>\n                        </div>\n                    </div>\n                   \n\n                </div>`;s.innerHTML=a,document.getElementById("start-btn").addEventListener("click",(()=>{t(n)}))}({appEl:s,goToPage:o}):void 0};o(n)})();