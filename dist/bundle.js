(()=>{"use strict";var n={d:(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},o:(n,t)=>Object.prototype.hasOwnProperty.call(n,t)};n.d({},{H6:()=>y});var t,e="difficulty",a="game",i="result";function s(n){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s(n)}function r(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,a)}return e}function c(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?r(Object(e),!0).forEach((function(t){o(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function o(n,t,e){return(t=function(n){var t=function(n,t){if("object"!==s(n)||null===n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var a=e.call(n,"string");if("object"!==s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"===s(t)?t:String(t)}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function l(n){for(var t=n.length-1;t>0;t--){var e=Math.floor(Math.random()*(t+1)),a=[n[e],n[t]];n[t]=a[0],n[e]=a[1]}return n}var u=0;function d(){clearInterval(t)}function m(n){var a=n.appEl,s=n.goToPage,r=n.playCards,c=r.map((function(n,t){return'<div class="card visible" data-index="'.concat(t,'">\n                            <div class="card__back">\n                                <img src="./static/img/card-back.png" alt="card back">\n                            </div>\n                            <div class="card__front">\n                                <div class="card__top-left">\n                                    <span class="rank">').concat(n.rank,'</span>\n                                    <span class="small-suit">').concat(f(n.suit),'</span>\n                                </div>\n                                <div class="card__center-suit">').concat(f(n.suit),'\n                                </div>\n                                <div class="card__down-right">\n                                    <span class="rank">').concat(n.rank,'</span>\n                                    <span class="small-suit">').concat(f(n.suit),"</span>\n                                </div> \n                            </div>  \n                        </div>")})).join(""),o='<div class="game">\n    <div class="game__info">\n      <div class="timer">\n        <div class="timer__block">\n          <span class="timer__label">min</span>\n          <span id="minutes">00</span>\n        </div>\n        <span class="timer__dot">.</span>\n        <div class="timer__block">\n          <span class="timer__label">sek</span>\n          <span id="seconds">00</span>\n        </div>\n      </div>\n      <button class="game__btn btn">Начать заново</button>\n    </div>\n    <div class="cards">'.concat(c,"</div>\n  ");a.innerHTML=o;var l=a.querySelectorAll(".card"),m=[],v=0;l.forEach((function(n){n.classList.remove("visible")}));var p=!1;setTimeout((function(){l.forEach((function(n){n.classList.add("visible")}))}),500);var b=setTimeout((function(){var n,e,a,i;l.forEach((function(n){n.classList.remove("visible")})),p=!0,n=0,e=0,a=document.getElementById("minutes"),i=document.getElementById("seconds"),t=window.setInterval((function(){60==++e&&(e=0,n++),u=60*n+e,null!==a&&(a.textContent=(n<10?"0":"")+n.toString()),null!==i&&(i.textContent=(e<10?"0":"")+e.toString())}),1e3)}),5e3);l.forEach((function(n,t){n.addEventListener("click",(function(){if(m.length<2&&!n.classList.contains("matched")&&!n.classList.contains("visible")&&(n.classList.add("visible"),m.push({element:n,index:t}),2===m.length)){var e=r[m[0].index],a=r[m[1].index];e.rank===a.rank&&e.suit===a.suit?(m.forEach((function(n){setTimeout((function(){n.element.classList.add("matched")}),600)})),++v==r.length/2&&setTimeout((function(){d(),y.gameTime=u,y.gameStatus=i,y.isWin=!0,s(i)}),800)):setTimeout((function(){d(),console.log(u),y.gameTime=u,y.gameStatus=i,y.isWin=!1,s(i)}),800),m=[]}}))}));var g=document.querySelector(".game__btn");null!==g&&g.addEventListener("click",(function(){p||clearTimeout(b),d(),s(e)}))}var v={Hearts:'<img src="./static/img/hearts.svg" alt="hearts">',Diamonds:'<img src="./static/img/diamonds.svg" alt="diamonds">',Clubs:'<img src="./static/img/clubs.svg" alt="clubs">',Spades:'<img src="./static/img/spades.svg" alt="spades">'};function f(n){return v[n]}function p(n){var t=n.appEl,a=n.goToPage,i=Math.floor(y.gameTime/60),s=y.gameTime%60,r='<div class="main">\n    <div class = "box result-box scale-in-center">\n    <img\n    src="./static/img/'.concat(y.isWin?"win-img.png":"loose-img.png",'"\n    alt="colorfull cone"\n    class="win__img"/>\n                        <p class="box__title result-box__title">').concat(y.isWin?"Вы выиграли!":"Вы проиграли!",'</p>\n                       \n                        <p class = "timer__title">Затраченное время</p>\n                           \n                            <div class="timer result-timer">\n                            <div class="timer__block">\n                             \n                              <span id="minutes">').concat(i<10?"0"+i:i,'</span>\n                            </div>\n                            <span class="timer__dot">.</span>\n                            <div class="timer__block">\n                             \n                              <span id="seconds">').concat(s<10?"0"+s:s,'</span>\n                            </div>\n                          </div>\n                          <button type="submit" class="btn result-btn" id="start-btn">Играть снова</button>\n                        </div>\n                    </div>\n                   \n\n                </div>');t.innerHTML=r;var c=t.querySelector("#start-btn");c&&c.addEventListener("click",(function(){a(e)}))}var b="",g=document.getElementById("app"),y={gameTime:0,difficulty:null,gameStatus:b,cards:[],selectedCards:[],isWin:null},_=function n(t){var s;switch(t){case e:b=e,h();break;case a:s=y.cards,m({appEl:g||document.createElement("div"),goToPage:n,playCards:s});break;case i:p({appEl:g||document.createElement("div"),goToPage:n});break;default:throw new Error("Страница не существует")}},h=function(){if(b===e)return function(n){var t=n.appEl,e=n.goToPage;t.innerHTML='<div class="main">\n    <form class="difficulty-form">\n                    <div class="box">\n                        <p class="box__title">Выбери сложность</p>\n                        <div class="box__container">\n                            <label class="box__item">\n                                <input type="radio" name="difficulty" value="1" />\n                                <span class="box__item-text">1</span>\n                            </label>\n                            <label class="box__item">\n                                <input type="radio" name="difficulty" value="2" />\n                                <span class="box__item-text">2</span>\n                            </label>\n                            <label class="box__item">\n                                <input type="radio" name="difficulty" value="3" />\n                                <span class="box__item-text">3</span>\n                            </label>\n                        </div>\n                        <button type="submit" class="btn difficulty-btn" id="start-btn">Старт</button>\n                        <div class="form-error"></div>\n                    </div>\n                </form>\n                </div>';var i=function(n){var e=t.querySelector(".form-error");null!==e&&(e.textContent=n)},s=t.querySelector(".difficulty-form"),r=document.querySelectorAll(".box__item"),o=null;r.forEach((function(n){n.addEventListener("click",(function(){i(""),null!==o&&o.classList.remove("selected"),n.classList.add("selected"),o=n}))})),null!==s&&s.addEventListener("submit",(function(n){n.preventDefault();var t=s.querySelector("input[name='difficulty']:checked");if(t){var r=parseInt(t.value,10);y.difficulty=r,y.gameStatus=a,y.cards=function(n){for(var t=[],e=["A","K","Q","J","10","9","8","7","6"],a=0,i=l(["Diamonds","Hearts","Clubs","Spades"]);a<i.length;a++)for(var s=i[a],r=0,o=l(e);r<o.length;r++){var u=o[r];"string"==typeof s&&"string"==typeof u&&t.push({suit:s,rank:u})}return t=l(t).slice(0,3*n).flatMap((function(n){return[n,c({},n)]})),l(t)}(r),e(a)}else i("Выберите уровень сложности!")}))}({appEl:g||document.createElement("div"),goToPage:_});if(b===a){var n=y.cards;return m({appEl:g||document.createElement("div"),goToPage:_,playCards:n})}return b===i?p({appEl:g||document.createElement("div"),goToPage:_}):void 0};_(e)})();