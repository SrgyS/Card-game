(()=>{"use strict";var n={d:(t,a)=>{for(var e in a)n.o(a,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:a[e]})},o:(n,t)=>Object.prototype.hasOwnProperty.call(n,t)};n.d({},{H6:()=>f});var t,a="difficulty",e="game",s="result",i=function(){return i=Object.assign||function(n){for(var t,a=1,e=arguments.length;a<e;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s]);return n},i.apply(this,arguments)};function c(n){for(var t,a=n.length-1;a>0;a--){var e=Math.floor(Math.random()*(a+1));t=[n[e],n[a]],n[a]=t[0],n[e]=t[1]}return n}var r=0;function l(){clearInterval(t)}function o(n){var e=n.appEl,i=n.goToPage,c=n.playCards,o=c.map((function(n,t){return'<div class="card visible" data-index="'.concat(t,'">\n                            <div class="card__back">\n                                <img src="./static/img/card-back.png" alt="card back">\n                            </div>\n                            <div class="card__front">\n                                <div class="card__top-left">\n                                    <span class="rank">').concat(n.rank,'</span>\n                                    <span class="small-suit">').concat(u(n.suit),'</span>\n                                </div>\n                                <div class="card__center-suit">').concat(u(n.suit),'\n                                </div>\n                                <div class="card__down-right">\n                                    <span class="rank">').concat(n.rank,'</span>\n                                    <span class="small-suit">').concat(u(n.suit),"</span>\n                                </div> \n                            </div>  \n                        </div>")})).join(""),d='<div class="game">\n    <div class="game__info">\n      <div class="timer">\n        <div class="timer__block">\n          <span class="timer__label">min</span>\n          <span id="minutes">00</span>\n        </div>\n        <span class="timer__dot">.</span>\n        <div class="timer__block">\n          <span class="timer__label">sek</span>\n          <span id="seconds">00</span>\n        </div>\n      </div>\n      <button class="game__btn btn">Начать заново</button>\n    </div>\n    <div class="cards">'.concat(o,"</div>\n  ");e.innerHTML=d;var m=e.querySelectorAll(".card"),v=[],p=0;m.forEach((function(n){n.classList.remove("visible")}));var g=!1;setTimeout((function(){m.forEach((function(n){n.classList.add("visible")}))}),500);var b=setTimeout((function(){var n,a,e,s;m.forEach((function(n){n.classList.remove("visible")})),g=!0,n=0,a=0,e=document.getElementById("minutes"),s=document.getElementById("seconds"),t=window.setInterval((function(){60==++a&&(a=0,n++),r=60*n+a,null!==e&&(e.textContent=(n<10?"0":"")+n.toString()),null!==s&&(s.textContent=(a<10?"0":"")+a.toString())}),1e3)}),5e3);m.forEach((function(n,t){n.addEventListener("click",(function(){if(v.length<2&&!n.classList.contains("matched")&&!n.classList.contains("visible")&&(n.classList.add("visible"),v.push({element:n,index:t}),2===v.length)){var a=c[v[0].index],e=c[v[1].index];a.rank===e.rank&&a.suit===e.suit?(v.forEach((function(n){setTimeout((function(){n.element.classList.add("matched")}),600)})),++p==c.length/2&&setTimeout((function(){l(),f.gameTime=r,f.gameStatus=s,f.isWin=!0,i(s)}),800)):setTimeout((function(){l(),console.log(r),f.gameTime=r,f.gameStatus=s,f.isWin=!1,i(s)}),800),v=[]}}))}));var _=document.querySelector(".game__btn");null!==_&&_.addEventListener("click",(function(){g||clearTimeout(b),l(),i(a)}))}var d={Hearts:'<img src="./static/img/hearts.svg" alt="hearts">',Diamonds:'<img src="./static/img/diamonds.svg" alt="diamonds">',Clubs:'<img src="./static/img/clubs.svg" alt="clubs">',Spades:'<img src="./static/img/spades.svg" alt="spades">'};function u(n){return d[n]}function m(n){var t=n.appEl,e=n.goToPage,s=Math.floor(f.gameTime/60),i=f.gameTime%60,c='<div class="main">\n    <div class = "box result-box scale-in-center">\n    <img\n    src="./static/img/'.concat(f.isWin?"win-img.png":"loose-img.png",'"\n    alt="colorfull cone"\n    class="win__img"/>\n                        <p class="box__title result-box__title">').concat(f.isWin?"Вы выиграли!":"Вы проиграли!",'</p>\n                       \n                        <p class = "timer__title">Затраченное время</p>\n                           \n                            <div class="timer result-timer">\n                            <div class="timer__block">\n                             \n                              <span id="minutes">').concat(s<10?"0"+s:s,'</span>\n                            </div>\n                            <span class="timer__dot">.</span>\n                            <div class="timer__block">\n                             \n                              <span id="seconds">').concat(i<10?"0"+i:i,'</span>\n                            </div>\n                          </div>\n                          <button type="submit" class="btn result-btn" id="start-btn">Играть снова</button>\n                        </div>\n                    </div>\n                   \n\n                </div>');t.innerHTML=c;var r=t.querySelector("#start-btn");r&&r.addEventListener("click",(function(){e(a)}))}var v="",p=document.getElementById("app"),f={gameTime:0,difficulty:null,gameStatus:v,cards:[],selectedCards:[],isWin:null},g=function(n){if([a,e,s].includes(n)){if(n===a)return v=a,b();if(n===e){var t=f.cards;return o({appEl:p,goToPage:g,playCards:t})}if(n===s)return m({appEl:p,goToPage:g})}throw new Error("Страница не существует")},b=function(){if(v===a)return function(n){var t=n.appEl,a=n.goToPage;t.innerHTML='<div class="main">\n    <form class="difficulty-form">\n                    <div class="box">\n                        <p class="box__title">Выбери сложность</p>\n                        <div class="box__container">\n                            <label class="box__item">\n                                <input type="radio" name="difficulty" value="1" />\n                                <span class="box__item-text">1</span>\n                            </label>\n                            <label class="box__item">\n                                <input type="radio" name="difficulty" value="2" />\n                                <span class="box__item-text">2</span>\n                            </label>\n                            <label class="box__item">\n                                <input type="radio" name="difficulty" value="3" />\n                                <span class="box__item-text">3</span>\n                            </label>\n                        </div>\n                        <button type="submit" class="btn difficulty-btn" id="start-btn">Старт</button>\n                        <div class="form-error"></div>\n                    </div>\n                </form>\n                </div>';var s=function(n){var a=t.querySelector(".form-error");null!==a&&(a.textContent=n)},r=t.querySelector(".difficulty-form"),l=(t.querySelector(".form-error"),document.querySelectorAll(".box__item")),o=null;l.forEach((function(n){n.addEventListener("click",(function(){s(""),null!==o&&o.classList.remove("selected"),n.classList.add("selected"),o=n}))})),null!==r&&r.addEventListener("submit",(function(n){n.preventDefault();var t=r.querySelector("input[name='difficulty']:checked");if(t){var l=parseInt(t.value,10);f.difficulty=l,f.gameStatus=e,f.cards=function(n){for(var t=[],a=["A","K","Q","J","10","9","8","7","6"],e=0,s=c(["Diamonds","Hearts","Clubs","Spades"]);e<s.length;e++)for(var r=s[e],l=0,o=c(a);l<o.length;l++){var d=o[l];"string"==typeof r&&"string"==typeof d&&t.push({suit:r,rank:d})}return t=c(t).slice(0,3*n).flatMap((function(n){return[n,i({},n)]})),c(t)}(l),a(e)}else s("Выберите уровень сложности!")}))}({appEl:p,goToPage:g});if(v===e){var n=f.cards;return o({appEl:p,goToPage:g,playCards:n})}return v===s?m({appEl:p,goToPage:g}):void 0};g(a)})();